<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
<title>Pacientes</title>
</h:head>
<h:body style="margin:0px; border:0; background-color:#E8E8E8;">

	<ui:insert name="header">
		<ui:include src="Template/header.jsf" />

	</ui:insert>

	<ui:insert name="menu">
		<ui:include src="Template/menu.jsf" />
	</ui:insert>

	<div
		style="position: relative; max-width: 1120px; margin-right: auto; margin-left: auto; font-size: 14px;">

		<p:tabView id="tabView"
			style="margin-top:10px;position:relative; width:1112px;background-color:#E8E8E8;">
			<p:tab title="Cadastro de Pacientes" style="position:relative;">



				<h:form id="form1">

					<p:panel id="dados_pessoais" header="Dados Pessoais"
						style="background-color:#F0F4F9; color:#000000;">
						<h:panelGrid columns="3" cellpadding="5">
							<p:column colspan="30" width="180">
								<p:outputPanel id="photo">
									<p:graphicImage height="150px"
										value="#{pageContext.servletContext.contextPath}/resources/fotos/#{mbPaciente.foto}"
										rendered="#{not empty mbPaciente.foto}" />
								</p:outputPanel>
								<p:commandButton value="Capturar Foto" type="button"
									onclick="PF('webcan').show();" />

								<p:dialog header="Fotagrafia" widgetVar="webcan" minHeight="40">

									<p:photoCam widgetVar="pc" listener="#{mbPaciente.oncapture}"
										update=":tabView:form1:photo" />
									<p:commandButton type="button" value="Fotografar"
										onclick="PF('pc').capture()" />
									<p:growl></p:growl>
								</p:dialog>
							</p:column>
							
							<p:column>
								<h:outputText value="Nome: " style="color:#000000;" />
								<br />
								<p:inputText value="#{mbPaciente.paciente.nome}" required="true" requiredMessage="Informe o nome." size="60" />
								<br />


								<h:outputText value="Nome do pai: " style="color:#000000;" />
								<br />
								<p:inputText value="#{mbPaciente.paciente.nomePai}" size="60" />
								<br />


								<h:outputText value="Nome da mãe: " style="color:#000000;" />
								<br />
								<p:inputText value="#{mbPaciente.paciente.nomeMae}"	required="true" size="60" requiredMessage="Informe o nome da mãe."/>
								<br />


								<h:panelGrid columns="2">
									<p:column>
										<h:outputText value="Cartão SUS: " style="color:#000000;" />
										<br />
										<p:inputMask mask="999999999999999" maxlength="15" value="#{mbPaciente.paciente.cartaoSus}"	size="20"  />
										<br />

										<h:outputText value="Naturalidade: " style="color:#000000;"/>
										<p:inputText value="#{mbPaciente.paciente.naturalidade}" required="true" requiredMessage="Informe a naturalidade."/>
									</p:column>
									
									<p:column>
										<h:outputText value="Profissão: " style="color:#000000;" />
										<br />
										<p:inputText value="#{mbPaciente.paciente.profissao}" />
										<br />

										<h:outputText value="Data de Nascimento:" style="color:#000000;" />
										<p:calendar pattern="dd/MM/yyyy" mask="99/99/9999" value="#{mbPaciente.paciente.dataNasc}" showOn="button"
											size="30" required="true" requiredMessage="Informe a data de nascimento." />
									</p:column>
								</h:panelGrid>





							</p:column>
							<p:column>

								<h:outputText value="CPF: "	style="margin-top:-20px; color:#000000;" />
								<br />
								<p:inputMask mask="999.999.999-99" value="#{mbPaciente.paciente.cpf}" size="30" required="true" requiredMessage="Informe o CPF." />
								<br />

								<h:outputText value="RG: " style="color:#000000;" />
								<br />
								<p:inputMask mask="99.999.999-9" value="#{mbPaciente.paciente.rg}" size="30" required="true" requiredMessage="Informe o RG." />

								<h:panelGrid columns="2">
									<p:column>
										<h:outputText value="Etnia:" style="color:#000000;" />
										<br />
										<p:selectOneMenu value="#{mbPaciente.paciente.etnia}"
											required="true">
											<f:selectItem itemValue="" itemLabel="Escolha"></f:selectItem>
											<f:selectItem itemValue="Branco(a)" itemLabel="Branco(a)"></f:selectItem>
											<f:selectItem itemValue="Negro(a)" itemLabel="Negro(a)"></f:selectItem>
											<f:selectItem itemValue="Pardo(a)" itemLabel="Pardo(a)"></f:selectItem>
											<f:selectItem itemValue="Índio(a)" itemLabel="Indio(a)"></f:selectItem>
											<f:selectItem itemValue="Outro(a)" itemLabel="Outro(a)"></f:selectItem>
										</p:selectOneMenu>
										<br />
									</p:column>

									<p:column>
										<h:outputText value="Estado Civil:" style="color:#000000;" />
										<br />
										<p:selectOneMenu value="#{mbPaciente.paciente.estCivil}"
											required="true">
											<f:selectItem itemValue="" itemLabel="Escolha"></f:selectItem>
											<f:selectItem itemValue="Solteiro(a)" itemLabel="Solteiro(a)"></f:selectItem>
											<f:selectItem itemValue="Casado(a)" itemLabel="Casado(a)"></f:selectItem>
											<f:selectItem itemValue="Divorciado(a)"
												itemLabel="Divorciado(a)"></f:selectItem>
											<f:selectItem itemValue="Separado(a)" itemLabel="Separado(a)"></f:selectItem>
											<f:selectItem itemValue="Viúvo(a)" itemLabel="Viúvo(a)"></f:selectItem>
										</p:selectOneMenu>

									</p:column>
									<p:column>
										<h:outputText value="Sexo :" style="color:#000000;" />
										<br />
										<p:selectOneMenu value="#{mbPaciente.paciente.sexo}"
											required="true">
											<f:selectItem itemValue="" itemLabel="Escolha"
												noSelectionOption="true"></f:selectItem>
											<f:selectItem itemValue="Masculino" itemLabel="Masculino"></f:selectItem>
											<f:selectItem itemValue="Feminino" itemLabel="Feminino"></f:selectItem>
										</p:selectOneMenu>

									</p:column>

								</h:panelGrid>
								<h:panelGrid columns="2"
									style="position:relative;margin-bottom:10px" cellpadding="5">
									<p:column>
										<p:outputLabel for="console" value="Alergico?:"
											style="color:#000000;" />
										<p:selectOneRadio id="console"
											value="#{mbPaciente.paciente.alergia}" style="color:#000000;">
											<f:selectItem itemLabel="Sim" itemValue="true" />
											<f:selectItem itemLabel="Não" itemValue="false" />
										</p:selectOneRadio>
									</p:column>
									<p:column>
										<h:outputText value="Tipo: " style="color:#000000;" />
										<br />
										<p:inputTextarea value="#{mbPaciente.paciente.tipoAlergia}"
											rows="2" cols="20" maxlength="500" autoResize="false" />

									</p:column>
								</h:panelGrid>
							</p:column>
						</h:panelGrid>
					</p:panel>


					<p:panel id="end" header="Endereço"
						style="width:500px; margin-top:20px; background-color:#F0F4F9;color:#000000;">

						<h:outputText value="CEP: " style="color:#000000;" />
						<br />
						<p:inputText maxlength="8" requiredMessage="Favor preencha o CEP"
							value="#{mbPaciente.paciente.cep}" required="true">
							<p:ajax event="keyup" update="cidade, endereco, bairro, uf"
								listener="#{mbPaciente.buscaCep}" />
						</p:inputText>
						<br />

						<h:outputText value="Rua: " style="color:#000000;" />
						<br />
						<p:inputText id="endereco" disabled="true"
							value="#{mbPaciente.paciente.endereco}" required="true" size="60" />


						<h:panelGrid columns="2">
							<p:column>
								<h:outputText value="Número: " style="color:#000000;" />
								<br />
								<p:inputText value="#{mbPaciente.paciente.numero}"
									required="true" size="15" />
							</p:column>

							<p:column>
								<h:outputText value="Complemento: " style="color:#000000;" />
								<br />
								<p:inputText value="#{mbPaciente.paciente.complemento}"
									required="true" size="30" />
							</p:column>
						</h:panelGrid>


						<h:outputText value="Bairro" style="color:#000000;" />
						<br />
						<p:inputText disabled="true" id="bairro"
							value="#{mbPaciente.paciente.bairro}" required="true" size="40" />
						<br />


						<h:panelGrid columns="2">

							<p:column>

								<h:outputText value="Cidade:" style="color:#000000;" />
								<br />
								<p:inputText disabled="true" id="cidade"
									value="#{mbPaciente.paciente.cidade}" required="true" size="30" />
								<br />

							</p:column>


							<p:column>
								<h:outputText value="Estado:" style="color:#000000;" />
								<br />
								<p:inputText id="uf" disabled="true"
									value="#{mbPaciente.paciente.uf}" required="true" size="10" />
								<br />
							</p:column>
						</h:panelGrid>
					</p:panel>

					<p:panel id="cont" header="Contato"
						style="postion:relative;float:right;width:500px;height:315px;margin-top:-320px;background-color:#F0F4F9;">
						<h:panelGrid columns="2">
							<p:column>
								<h:outputText value="Telefone Residencial:"
									style="color:#000000;" />
								<br />
								<p:inputMask mask="(99)9999-9999"
									value="#{mbPaciente.paciente.telRes}" required="true" />
							</p:column>

							<p:column>
								<h:outputText value="Telefone Celular:" style="color:#000000;" />
								<br />
								<p:inputMask mask="(99)99999-9999"
									value="#{mbPaciente.paciente.telCel}" required="true" />
							</p:column>
						</h:panelGrid>

						<h:outputText value="Email: " style="color:#000000;" />
						<br />
						<p:inputText value="#{mbPaciente.paciente.email}" required="true"
							size="50" type="email" />
						<br />

						<h:outputText value="Observção: " style="color:#000000;" />
						<br />
						<p:inputTextarea value="#{mbPaciente.paciente.obs}"
							required="true" rows="6" cols="60" maxlength="500"
							autoResize="false" />
					</p:panel>


					<p:panel id="pos_botao"
						style=" padding-bottom:15px;background-color:#E8E8E8; height:50;position: relative; max-width: 1120px; margin-right: auto; margin-left: auto;">

						<p:commandButton value="Salvar"
							style="margin-top:-20; float:right;"
							action="#{mbPaciente.salvar}" ajax="true"
							update=":tabView:form1, :tabView:form2" />
						<p:growl></p:growl>

						<p:commandButton value="Limpar" style="margin-top:0;float:right"
							type="reset" />

					</p:panel>
				</h:form>


			</p:tab>


			<!-- ABA PARA A CONSULTA DOS PACIENTES -->
			<p:tab title="Consulta Pacientes">
				<h:form id="form2">
					<p:growl id="msgs" showDetail="true" />
					<p:dataTable id="dataTable" var="linha" editable="true"
						reflow="true" value="#{mbPaciente.pacientes}"
						widgetVar="tabelaPacientes"
						filteredValue="#{mbPaciente.pacientesFiltrados}"
						emptyMessage="Não há pacientes." paginator="true" rows="10"
						style="margin-bottom:20px">

						<f:facet name="header">
							<p:outputPanel>
								<h:outputText value="Pesquisa em todos os campos:" />
								<p:inputText id="globalFilter"
									onkeyup="PF('tabelaPacientes').filter()" style="width:150px"
									placeholder="Digite a busca" />
							</p:outputPanel>
						</f:facet>

						<p:column width="20" headerText="SUS"
							filterBy="#{linha.cartaoSus}" filterMatchMode="contains">

							<h:outputText value="#{linha.cartaoSus}" />

						</p:column>

						<p:column width="20" headerText="Nome do Paciente"
							filterBy="#{linha.nome}" filterMatchMode="contains">
							<h:outputText value="#{linha.nome}" />
						</p:column>

						<p:column width="20" headerText="Telefones"
							filterBy="#{linha.telCel}" filterMatchMode="contains">
							<h:outputText value="#{linha.telCel}" />
						</p:column>

						<p:column headerText="Exclusão" width="5"
							styleClass="text-align:center">
							<p:commandButton update="pacExDetail"
								oncomplete="PF('pacExDialog').show()" icon="ui-icon-trash">
								<f:setPropertyActionListener value="#{linha}"
									target="#{mbPaciente.selecionado}"></f:setPropertyActionListener>
							</p:commandButton>
						</p:column>

						<p:column style="width:32px;text-align: center"
							headerText="Edição">
							<p:commandButton update="pacEdDetail"
								oncomplete="PF('pacEdDialog').show()" icon="ui-icon-search">
								<f:setPropertyActionListener value="#{linha}"
									target="#{mbPaciente.selecionado}" />
							</p:commandButton>
						</p:column>
					</p:dataTable>

				</h:form>

			</p:tab>

		</p:tabView>

	</div>

	<p:dialog header="Paciente" widgetVar="pacEdDialog" modal="true"
		minHeight="600" minWidth="600" style="background-color:#F0F4F9;">
		<p:outputPanel id="pacEdDetail" style="text-align:center;">
			<h:form id="form_pacEdModal" style="background-color:#E8E8E8;">

				<h:panelGrid columns="1"
					rendered="#{not empty mbPaciente.selecionado}"
					columnClasses="label,value">
					<f:facet name="header">
						<p:graphicImage height="150"
							value="#{pageContext.servletContext.contextPath}/resources/fotos/#{mbPaciente.selecionado.foto}" />
					</f:facet>
					<p:tabView style="background-color:#F0F4F9;">
						<p:tab title="Dados pessoais" style="background-color:#F0F4F9;">
							<h:panelGrid columns="4"
								style="text-align:left;background-color:#E8E8E8;">
								<h:outputLabel value="Nome" style="color:#000000" />

								<p:inputText value="#{mbPaciente.selecionado.nome}" size="40" />


								<h:outputLabel value="Nome do pai" style="color:#000000" />

								<p:inputText value="#{mbPaciente.selecionado.nomePai}"
									required="true" size="40" />


								<h:outputLabel value="Nome da mãe" style="color:#000000" />

								<p:inputText value="#{mbPaciente.selecionado.nomeMae}"
									required="true" size="40" />


								<h:outputLabel value="Cartão SUS" style="color:#000000" />

								<p:inputMask mask="999999999999999"
									value="#{mbPaciente.selecionado.cartaoSus}" required="true" />


								<h:outputLabel value="CPF" style="color:#000000" />

								<p:inputMask mask="999.999.999-99"
									value="#{mbPaciente.selecionado.cpf}" required="true" />


								<h:outputLabel value="RG" style="color:#000000" />

								<p:inputMask mask="99.999.999-9"
									value="#{mbPaciente.selecionado.rg}" required="true" />


								<h:outputLabel value="Profissão" style="color:#000000" />

								<p:inputText value="#{mbPaciente.selecionado.profissao}"
									required="true" />


								<h:outputLabel value="Estado Civil" style="color:#000000" />

								<p:column>
									<h:panelGrid columns="2">
										<h:outputText value="#{mbPaciente.selecionado.estCivil}"
											style="color:#000000" />
										<p:selectOneMenu id="estado_civil"
											value="#{mbPaciente.selecionado.estCivil}">
											<f:selectItem itemLabel="Selecione" itemValue="" />
											<f:selectItem itemLabel="Casado" itemValue="CASADO"></f:selectItem>
											<f:selectItem itemLabel="Solteiro" itemValue="SOLTEIRO"></f:selectItem>
											<f:selectItem itemLabel="Viuvo" itemValue="VIUVO"></f:selectItem>
											<f:selectItem itemLabel="Divorciado" itemValue="DIVORCIADO"></f:selectItem>
										</p:selectOneMenu>
									</h:panelGrid>
								</p:column>

								<h:outputText value="Telefones" style="color:#000000" />
								<h:panelGrid columns="2">
									<p:inputMask mask="(99)99999-9999"
										value="#{mbPaciente.selecionado.telCel}"
										placeholder="Digite o telefone Celular" />
									<p:inputMask mask="(99)9999-9999"
										value="#{mbPaciente.selecionado.telRes}"
										placeholder="Digite o telefone Residencial" />
								</h:panelGrid>

								<h:outputLabel value="Email" style="color:#000000" />

								<p:inputText value="#{mbPaciente.selecionado.email}"
									required="true" />

							</h:panelGrid>
						</p:tab>
						<p:tab title="Endereço">
							<h:panelGrid columns="2"
								style="text-align:left;background-color:#E8E8E8;">

								<h:outputLabel value="CEP" style="color:#000000" />

								<p:inputText maxlength="8"
									requiredMessage="Favor preencha o CEP"
									value="#{mbPaciente.selecionado.cep}" required="true">
									<p:ajax event="keyup" update="cidade, endereco, bairro, uf"
										listener="#{mbPaciente.buscaCepSelecionado}" />
								</p:inputText>


								<h:outputLabel value="Rua:" style="color:#000000" />

								<p:inputText disabled="true"
									value="#{mbPaciente.selecionado.endereco}" required="true"
									id="endereco" size="60" />


								<h:outputLabel value="Número:" style="color:#000000;" />

								<p:inputText value="#{mbPaciente.selecionado.numero}"
									required="true" id="numero" size="10" />


								<h:outputLabel value="Bairro:" style="color:#000000" />

								<p:inputText disabled="true"
									value="#{mbPaciente.selecionado.bairro}" required="true"
									id="bairro" size="30" />


								<h:outputLabel value="Cidade:" style="color:#000000;" />

								<p:inputText disabled="true"
									value="#{mbPaciente.selecionado.cidade}" required="true"
									id="cidade" size="30" />


								<h:outputLabel value="UF:" style="color:#000000;" />

								<p:inputText id="uf" disabled="true"
									value="#{mbPaciente.selecionado.uf}" required="true" size="10" />


								<h:outputLabel value="Complemento:" style="color:#000000;" />

								<p:inputText value="#{mbPaciente.selecionado.complemento}"
									required="true" id="complemnto" size="30" />


							</h:panelGrid>

						</p:tab>
					</p:tabView>
				</h:panelGrid>

				<p:commandButton value="Alterar"
					style="margin-top:-20; float:right;" action="#{mbPaciente.editar}"
					ajax="true" update=":tabView:form2"></p:commandButton>
			</h:form>
		</p:outputPanel>
	</p:dialog>
	<p:dialog header="Paciente" widgetVar="pacExDialog" modal="true"
		minHeight="600" minWidth="600">
		<p:outputPanel id="pacExDetail" style="text-align:center;">
			<h:form id="form_pacExModal">

				<p:panelGrid columns="1"
					rendered="#{not empty mbPaciente.selecionado}"
					columnClasses="label,value">
					<f:facet name="header">
						<p:graphicImage height="150"
							value="#{pageContext.servletContext.contextPath}/resources/fotos/#{mbPaciente.selecionado.foto}" />
					</f:facet>
					<p:tabView>
						<p:tab title="Dados pessoais">
							<p:panelGrid columns="4">
								<h:outputLabel value="Nome" />
								<p:panelGrid columns="1">
									<h:outputText value="#{mbPaciente.selecionado.nome}" />
								</p:panelGrid>

								<h:outputLabel value="Nome do pai" />
								<p:panelGrid columns="1">
									<h:outputText value="#{mbPaciente.selecionado.nomePai}" />
								</p:panelGrid>

								<h:outputLabel value="Nome da mãe" />
								<p:panelGrid columns="1">
									<h:outputText value="#{mbPaciente.selecionado.nomeMae}" />
								</p:panelGrid>

								<h:outputLabel value="Cartão SUS" />
								<p:panelGrid columns="1">
									<h:outputText value="#{mbPaciente.selecionado.cartaoSus}" />
								</p:panelGrid>

								<h:outputLabel value="CPF" />
								<p:panelGrid columns="1">
									<h:outputText value="#{mbPaciente.selecionado.cpf}" />
								</p:panelGrid>

								<h:outputLabel value="RG" />
								<p:panelGrid columns="1">
									<h:outputText value="#{mbPaciente.selecionado.rg}" />
								</p:panelGrid>

								<h:outputLabel value="Profissão" />
								<p:panelGrid columns="1">
									<h:outputText value="#{mbPaciente.selecionado.profissao}" />
								</p:panelGrid>

								<h:outputLabel value="Estado Civil" />
								<p:panelGrid columns="1">
									<h:outputText value="#{mbPaciente.selecionado.estCivil}" />
								</p:panelGrid>

								<h:outputText value="Telefones" />
								<p:panelGrid columns="2">
									<h:outputText value="#{mbPaciente.selecionado.telCel}" />
									<h:outputText value="#{mbPaciente.selecionado.telRes}" />
								</p:panelGrid>

								<h:outputLabel value="Email" />
								<p:panelGrid columns="1">
									<h:outputText value="#{mbPaciente.selecionado.email}" />
								</p:panelGrid>
							</p:panelGrid>
						</p:tab>
						<p:tab title="Endereço">
							<h:panelGrid columns="2">

								<h:outputLabel value="CEP" />
								<p:panelGrid columns="1">
									<h:outputText value="#{mbPaciente.selecionado.cep}" />
								</p:panelGrid>

								<h:outputLabel value="Rua:" />
								<p:panelGrid columns="1">
									<h:outputText value="#{mbPaciente.selecionado.endereco}" />
								</p:panelGrid>

								<h:outputLabel value="Número:" style="color:#000000;" />
								<p:panelGrid columns="1">
									<h:outputText value="#{mbPaciente.selecionado.numero}" />
								</p:panelGrid>

								<h:outputLabel value="Bairro:" />
								<p:panelGrid columns="1">
									<h:outputText value="#{mbPaciente.selecionado.bairro}" />
								</p:panelGrid>

								<h:outputLabel value="Cidade:" />
								<p:panelGrid columns="1">
									<h:outputText value="#{mbPaciente.selecionado.cidade}" />
								</p:panelGrid>

								<h:outputLabel value="UF:" style="color:#000000;" />
								<p:panelGrid columns="1">
									<h:outputText value="#{mbPaciente.selecionado.uf}" />
								</p:panelGrid>

								<h:outputLabel value="Complemento:" style="color:#000000;" />
								<p:panelGrid columns="1">
									<h:outputText value="#{mbPaciente.selecionado.complemento}" />
								</p:panelGrid>
							</h:panelGrid>
						</p:tab>
					</p:tabView>
				</p:panelGrid>

				<p:commandButton value="Excluir"
					style="margin-top:-20; float:right;" action="#{mbPaciente.excluir}"
					ajax="true" update=":tabView:form2">
					<p:confirm icon="ui-icon-alert" message="Deseja Excluir ?"
						header="Confirma?" />
				</p:commandButton>
				<p:confirmDialog appendTo="@(body)" global="true">
					<p:commandButton process="@this" value="Sim" type="button"
						onclick="PF('pacExDialog').hide()"
						styleClass="ui-confirmdialog-yes" icon="ui-icon-check"></p:commandButton>
					<p:commandButton process="@this" value="Não"
						styleClass="ui-confirmdialog-no" icon="ui-icon-close"></p:commandButton>
				</p:confirmDialog>
			</h:form>
		</p:outputPanel>
	</p:dialog>

	<ui:insert name="footer">
		<ui:include src="Template/footer.jsf" />
	</ui:insert>
</h:body>
</html>